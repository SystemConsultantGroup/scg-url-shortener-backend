<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Shortener Service</title>
    <style>
        .hidden { display: none; }
    </style>
</head>

<body>
<div id="guest-section">
    <a href="/auth/google">[êµ¬ê¸€ ë¡œê·¸ì¸]</a>
</div>

<div id="user-section" class="hidden">
    <h2 id="welcome-msg"></h2>
    <p>Email: <span id="user-email"></span></p>
</div>

<script>
    // í˜ì´ì§€ê°€ ì—´ë¦¬ë©´ ìë™ìœ¼ë¡œ ì‹¤í–‰
    fetch('/user')
        .then(response => {
            if (!response.ok) throw new Error('Not logged in');
            return response.json();
        })
        .then(user => {
            // ë¡œê·¸ì¸ ì„±ê³µ ì‹œ: ë¡œê·¸ì¸ ë²„íŠ¼ ìˆ¨ê¸°ê³  í™˜ì˜ ë©”ì‹œì§€ ë³´ì´ê¸°
            document.getElementById('guest-section').classList.add('hidden');
            document.getElementById('user-section').classList.remove('hidden');

            // ë‹‰ë„¤ì„ê³¼ ì´ë©”ì¼ ì¶œë ¥
            document.getElementById('welcome-msg').innerText = `${user.nickname}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‘‹`;
            document.getElementById('user-email').innerText = user.email;
        })
        .catch(() => {
            // ë¡œê·¸ì¸ ì•ˆ ëœ ìƒíƒœë©´ ê·¸ëƒ¥ ë¡œê·¸ì¸ ë²„íŠ¼ë§Œ ë³´ì„
            console.log('ë¹„ë¡œê·¸ì¸ ìƒíƒœ');
        });
</script>
</body>
</html>


<!--<!doctype html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1">-->
<!--    <title>Document</title>-->
<!--</head>-->
<!--<body>-->
<!--    <h1>hello</h1>-->
<!--</body>-->
<!--</html>-->